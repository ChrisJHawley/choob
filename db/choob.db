drop database choob;
create database choob;

use choob;

-- MySQL dump 9.11
--
-- Host: localhost    Database: choob
-- ------------------------------------------------------
-- Server version	4.0.24_Debian-10-log

--
-- Table structure for table `AddNicks`
--


CREATE TABLE `UserNodes` (
  `NodeID` int(11) unsigned NOT NULL auto_increment,
  `NodeName` varchar(32) NOT NULL default '',
  `NodeClass` tinyint(3) unsigned NOT NULL default '0',
  PRIMARY KEY  (`NodeID`),
  UNIQUE KEY `NodeName` (`NodeName`,`NodeClass`)
) Type=InnoDB;

--
-- Dumping data for table `UserNodes`
--

INSERT INTO `UserNodes` VALUES (1,'root',3);
INSERT INTO `UserNodes` VALUES (2,'bucko',0);
INSERT INTO `UserNodes` VALUES (3,'bucko',1);

--
-- Table structure for table `AddNicks`
--

--
-- I believe this table should not be used. It's insecure. --bucko
--

-- CREATE TABLE `AddNicks` (
--   `UserID` int(11) NOT NULL default '0',
--   `Nick` varchar(64) NOT NULL default '',
--   UNIQUE KEY `Nick` (`Nick`)
-- ) Type=InnoDB;

--
-- Dumping data for table `AddNicks`
--

-- INSERT INTO `AddNicks` VALUES (3,'Faux%');
-- INSERT INTO `AddNicks` VALUES (3,'YourMum|%');

--
-- Table structure for table `Aliases`
--

CREATE TABLE `Aliases` (
  `Name` varchar(64) NOT NULL default '',
  `Converted` tinytext NOT NULL,
--  What's the point of this value?
--  `UserID` int(11) NOT NULL default '0',
  PRIMARY KEY  (`Name`)
) Type=InnoDB;

--
-- Dumping data for table `Aliases`
--

INSERT INTO `Aliases` VALUES ('say','Faux.Say');
INSERT INTO `Aliases` VALUES ('reply','Faux.Reply');

--
-- Table structure for table `CorePlugins`
--

CREATE TABLE `CorePlugins` (
  `PluginName` varchar(64) NOT NULL default '',
  `URL` mediumtext NOT NULL,
  PRIMARY KEY  (`PluginName`)
) Type=InnoDB;

--
-- Dumping data for table `CorePlugins`
--

INSERT INTO `CorePlugins` VALUES ('Test','http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Test.java');
INSERT INTO `CorePlugins` VALUES ('Plugin','http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Plugin.java');

--
-- Table structure for table `GroupMembers`
--

CREATE TABLE `GroupMembers` (
  `GroupID` int(11) unsigned default NULL,
  `MemberID` int(11) unsigned default NULL,
  UNIQUE KEY `GroupID` (`GroupID`,`MemberID`),
  KEY `MemberID` (`MemberID`),
  KEY `GroupID_2` (`GroupID`),
  FOREIGN KEY (`GroupID`) REFERENCES UserNodes (`NodeID`),
  FOREIGN KEY (`MemberID`) REFERENCES UserNodes (`NodeID`)
) Type=InnoDB;

--
-- Dumping data for table `GroupMembers`
--

INSERT INTO `GroupMembers` VALUES (1,2);
INSERT INTO `GroupMembers` VALUES (3,2);

--
-- Table structure for table `History`
--

CREATE TABLE `History` (
  `LineID` int(11) unsigned NOT NULL auto_increment,
  `Type` varchar(50) NOT NULL default '',
  `Nick` varchar(32) NOT NULL default '',
  `Hostmask` varchar(64) NOT NULL default '',
  `Channel` varchar(32) default NULL,
  `Text` text NOT NULL,
  `Time` bigint(20) NOT NULL default '0',
  `Random` tinyint(4) NOT NULL default '0',
  PRIMARY KEY  (`LineID`),
  KEY `Nick` (`Nick`),
  KEY `Channel` (`Channel`),
  KEY `Time` (`Time`)
) TYPE=InnoDB;

--
-- Table structure for table `LoadedPlugins`
--

CREATE TABLE `LoadedPlugins` (
  `Name` varchar(255) NOT NULL default '',
  `Source` longtext NOT NULL,
  PRIMARY KEY `Name` (`Name`)
) Type=InnoDB;

--
-- Table structure for table `ObjectStore`
--

CREATE TABLE `ObjectStore` (
  `ObjectID` int(11) NOT NULL auto_increment,
  `ClassName` varchar(128) NOT NULL default '',
  `ClassID` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ObjectID`),
  UNIQUE KEY `Composite` (`ClassName`,`ClassID`)
) Type=InnoDB;

--
-- Table structure for table `ObjectStoreData`
--

CREATE TABLE `ObjectStoreData` (
  `ObjectID` int(11) NOT NULL default '0',
  `FieldName` varchar(128) NOT NULL default '',
  `FieldBigInt` BIGINT NOT NULL,
  `FieldDouble` DOUBLE NOT NULL,
  `FieldString` text NOT NULL,
  UNIQUE KEY (`ObjectID`, `FieldName`),
  KEY (`FieldName`),
  INDEX (`FieldBigInt`),
  INDEX (`FieldDouble`),
  INDEX (`FieldString` (32)),
  FOREIGN KEY (`ObjectID`) REFERENCES `ObjectStore` (`ObjectID`)
) Type=InnoDB;

--
-- Table structure for table `UserNodePermissions`
--

CREATE TABLE `UserNodePermissions` (
  `NodeID` int(11) UNSIGNED NOT NULL default '0',
  `Type` VARCHAR(50) NOT NULL,
  `Permission` VARCHAR(80) NOT NULL,
  `Action` VARCHAR(30) NOT NULL,
  KEY (`NodeID`),
  UNIQUE KEY (`NodeID`, `Type`, `Permission`, `Action`),
  FOREIGN KEY (`NodeID`) REFERENCES `UserNodes` (`NodeID`)
) Type=InnoDB COMMENT='Table storing plugin permissions';

--
-- Dumping data for table `UserNodePermissions`
--

INSERT INTO `UserNodePermissions` VALUES (1,'java.security.AllPermission','','');

--
-- Table structure for table `UserPlugins`
--

CREATE TABLE `UserPlugins` (
  `UserID` int(11) UNSIGNED NOT NULL DEFAULT '0',
  `PluginName` VARCHAR(32) NOT NULL,
  KEY (`UserID`),
  UNIQUE KEY (`UserID`, `PluginName`),
  KEY (`PluginName`),
  FOREIGN KEY (`UserID`) REFERENCES `UserNodes` (`NodeID`)
) Type=InnoDB;

--
-- Dumping data for table `UserPlugins`
--

INSERT INTO `UserPlugins` VALUES (2,'Plugin');
INSERT INTO `UserPlugins` VALUES (2,'Test');

