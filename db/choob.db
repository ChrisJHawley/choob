-- phpMyAdmin SQL Dump
-- version 2.6.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Nov 21, 2005 at 02:30 PM
-- Server version: 4.1.11
-- PHP Version: 5.0.4
--
-- Database: `choob`
--

-- -
-- This is needed to make sure the constraints from the existing db are
-- cleared, otherwise we get constraint errors when importing.
-- -
DROP DATABASE IF EXISTS choob;
CREATE DATABASE choob;

USE `choob`;

-- --------------------------------------------------------

--
-- Table structure for table `Plugins`
--
-- Creation: Nov 04, 2005 at 12:58 PM
--

DROP TABLE IF EXISTS `Plugins`;
CREATE TABLE IF NOT EXISTS `Plugins` (
  `PluginName` varchar(64) NOT NULL default '',
  `URL` mediumtext NOT NULL,
  `CorePlugin` tinyint(1) NOT NULL default 0,
  PRIMARY KEY  (`PluginName`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `Plugins`
--

INSERT INTO `Plugins` VALUES ('Alias', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Alias.java', 1);
INSERT INTO `Plugins` VALUES ('Dict', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Dict.java', 1);
INSERT INTO `Plugins` VALUES ('Events', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Events.java', 1);
INSERT INTO `Plugins` VALUES ('Factoids', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Factoids.java', 1);
INSERT INTO `Plugins` VALUES ('Help', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Help.java', 1);
INSERT INTO `Plugins` VALUES ('Karma', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Karma.java', 1);
INSERT INTO `Plugins` VALUES ('Lectures', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Lectures.java', 1);
INSERT INTO `Plugins` VALUES ('Lookup', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Lookup.java', 1);
INSERT INTO `Plugins` VALUES ('MFJ', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/MFJ.java', 1);
INSERT INTO `Plugins` VALUES ('MiscMsg', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/MiscMsg.java', 1);
INSERT INTO `Plugins` VALUES ('NickServ', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/NickServ.java', 1);
INSERT INTO `Plugins` VALUES ('Options', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Options.java', 1);
INSERT INTO `Plugins` VALUES ('Plugin', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Plugin.java', 1);
INSERT INTO `Plugins` VALUES ('Quote', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Quote.java', 1);
INSERT INTO `Plugins` VALUES ('Security', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Security.java', 1);
INSERT INTO `Plugins` VALUES ('Seen', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Seen.java', 1);
INSERT INTO `Plugins` VALUES ('Shutup', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Shutup.java', 1);
INSERT INTO `Plugins` VALUES ('Talk', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Talk.java', 1);
INSERT INTO `Plugins` VALUES ('Tell', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Tell.java', 1);
INSERT INTO `Plugins` VALUES ('Test', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Test.java', 1);
INSERT INTO `Plugins` VALUES ('TimedEvents', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/TimedEvents.java', 1);
INSERT INTO `Plugins` VALUES ('Vote', 'http://svn.uwcs.co.uk/repos/choob/trunk/contrib/Vote.java', 1);

-- --------------------------------------------------------

--
-- Table structure for table `GroupMembers`
--
-- Creation: Nov 04, 2005 at 12:58 PM
--

DROP TABLE IF EXISTS `GroupMembers`;
CREATE TABLE IF NOT EXISTS `GroupMembers` (
  `GroupID` int(11) unsigned default NULL,
  `MemberID` int(11) unsigned default NULL,
  UNIQUE KEY `GroupID` (`GroupID`,`MemberID`),
  KEY `MemberID` (`MemberID`),
  KEY `GroupID_2` (`GroupID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- RELATIONS FOR TABLE `GroupMembers`:
--   `GroupID`
--       `UserNodes` -> `NodeID`
--   `MemberID`
--       `UserNodes` -> `NodeID`
--

--
-- Dumping data for table `GroupMembers`
--

INSERT INTO `GroupMembers` VALUES (1, 4);
INSERT INTO `GroupMembers` VALUES (1, 5);
INSERT INTO `GroupMembers` VALUES (1, 6);
INSERT INTO `GroupMembers` VALUES (1, 7);
INSERT INTO `GroupMembers` VALUES (1, 8);
INSERT INTO `GroupMembers` VALUES (1, 9);
INSERT INTO `GroupMembers` VALUES (1, 10);
INSERT INTO `GroupMembers` VALUES (1, 11);
INSERT INTO `GroupMembers` VALUES (1, 12);
INSERT INTO `GroupMembers` VALUES (1, 13);
INSERT INTO `GroupMembers` VALUES (1, 14);
INSERT INTO `GroupMembers` VALUES (1, 15);
INSERT INTO `GroupMembers` VALUES (1, 16);
INSERT INTO `GroupMembers` VALUES (1, 17);
INSERT INTO `GroupMembers` VALUES (1, 31);
INSERT INTO `GroupMembers` VALUES (1, 32);
INSERT INTO `GroupMembers` VALUES (4, 3);

-- --------------------------------------------------------

--
-- Table structure for table `History`
--
-- Creation: Nov 04, 2005 at 12:58 PM
--

DROP TABLE IF EXISTS `History`;
CREATE TABLE IF NOT EXISTS `History` (
  `LineID` int(11) unsigned NOT NULL auto_increment,
  `Type` varchar(50) NOT NULL default '',
  `Nick` varchar(32) NOT NULL default '',
  `Hostmask` varchar(64) NOT NULL default '',
  `Channel` varchar(32) default NULL,
  `Text` text NOT NULL,
  `Time` bigint(20) NOT NULL default '0',
  `Random` tinyint(4) NOT NULL default '0',
  PRIMARY KEY  (`LineID`),
  KEY `Nick` (`Nick`),
  KEY `Channel` (`Channel`),
  KEY `Time` (`Time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `History`
--


-- --------------------------------------------------------

--
-- Table structure for table `ObjectStore`
--
-- Creation: Nov 04, 2005 at 12:58 PM
--

DROP TABLE IF EXISTS `ObjectStore`;
CREATE TABLE IF NOT EXISTS `ObjectStore` (
  `ObjectID` int(11) NOT NULL auto_increment,
  `ClassName` varchar(128) NOT NULL default '',
  `ClassID` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ObjectID`),
  UNIQUE KEY `Composite` (`ClassName`,`ClassID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `ObjectStore`
--


-- --------------------------------------------------------

--
-- Table structure for table `ObjectStoreData`
--
-- Creation: Nov 04, 2005 at 12:58 PM
--

DROP TABLE IF EXISTS `ObjectStoreData`;
CREATE TABLE IF NOT EXISTS `ObjectStoreData` (
  `ObjectID` int(11) NOT NULL default '0',
  `FieldName` varchar(128) NOT NULL default '',
  `FieldBigInt` bigint(20) NOT NULL default '0',
  `FieldDouble` double NOT NULL default '0',
  `FieldString` text,
  UNIQUE KEY `ObjectID` (`ObjectID`,`FieldName`),
  KEY `FieldName` (`FieldName`),
  KEY `FieldBigInt` (`FieldBigInt`),
  KEY `FieldDouble` (`FieldDouble`),
  KEY `FieldString` (`FieldString`(32))
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- RELATIONS FOR TABLE `ObjectStoreData`:
--   `ObjectID`
--       `ObjectStore` -> `ObjectID`
--

--
-- Dumping data for table `ObjectStoreData`
--


-- --------------------------------------------------------

--
-- Table structure for table `UserNodePermissions`
--
-- Creation: Nov 04, 2005 at 12:58 PM
--

DROP TABLE IF EXISTS `UserNodePermissions`;
CREATE TABLE IF NOT EXISTS `UserNodePermissions` (
  `NodeID` int(11) unsigned NOT NULL default '0',
  `Type` varchar(50) NOT NULL default '',
  `Permission` varchar(80) NOT NULL default '',
  `Action` varchar(30) NOT NULL default '',
  UNIQUE KEY `NodeID_2` (`NodeID`,`Type`,`Permission`,`Action`),
  KEY `NodeID` (`NodeID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Table storing plugin permissions';

--
-- RELATIONS FOR TABLE `UserNodePermissions`:
--   `NodeID`
--       `UserNodes` -> `NodeID`
--

--
-- Dumping data for table `UserNodePermissions`
--

INSERT INTO `UserNodePermissions` VALUES (1, 'java.security.AllPermission', '', '');
INSERT INTO `UserNodePermissions` VALUES (5, 'choob', 'plugin.load.*', '');
INSERT INTO `UserNodePermissions` VALUES (19, 'java.net.SocketPermission', 'faux.uwcs.co.uk:80', 'connect,resolve');

-- --------------------------------------------------------

--
-- Table structure for table `UserNodes`
--
-- Creation: Nov 04, 2005 at 12:58 PM
--

DROP TABLE IF EXISTS `UserNodes`;
CREATE TABLE IF NOT EXISTS `UserNodes` (
  `NodeID` int(11) unsigned NOT NULL auto_increment,
  `NodeName` varchar(32) NOT NULL default '',
  `NodeClass` tinyint(3) unsigned NOT NULL default '0',
  PRIMARY KEY  (`NodeID`),
  UNIQUE KEY `NodeName` (`NodeName`,`NodeClass`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `UserNodes`
--

INSERT INTO `UserNodes` VALUES (15, 'Alias', 2);
INSERT INTO `UserNodes` VALUES (2, 'anonymous', 3);
INSERT INTO `UserNodes` VALUES (26, 'dict', 2);
INSERT INTO `UserNodes` VALUES (19, 'Events', 2);
INSERT INTO `UserNodes` VALUES (20, 'Factoids', 2);
INSERT INTO `UserNodes` VALUES (3, 'Faux', 0);
INSERT INTO `UserNodes` VALUES (4, 'Faux', 1);
INSERT INTO `UserNodes` VALUES (9, 'Help', 2);
INSERT INTO `UserNodes` VALUES (25, 'http', 2);
INSERT INTO `UserNodes` VALUES (16, 'Karma', 2);
INSERT INTO `UserNodes` VALUES (21, 'Lectures', 2);
INSERT INTO `UserNodes` VALUES (22, 'Lookup', 2);
INSERT INTO `UserNodes` VALUES (23, 'MFJ', 2);
INSERT INTO `UserNodes` VALUES (13, 'MiscMsg', 2);
INSERT INTO `UserNodes` VALUES (8, 'NickServ', 2);
INSERT INTO `UserNodes` VALUES (6, 'Plugin', 2);
INSERT INTO `UserNodes` VALUES (5, 'plugindevs', 3);
INSERT INTO `UserNodes` VALUES (17, 'Quote', 2);
INSERT INTO `UserNodes` VALUES (1, 'root', 3);
INSERT INTO `UserNodes` VALUES (7, 'Security', 2);
INSERT INTO `UserNodes` VALUES (10, 'Seen', 2);
INSERT INTO `UserNodes` VALUES (24, 'Shutup', 2);
INSERT INTO `UserNodes` VALUES (11, 'Talk', 2);
INSERT INTO `UserNodes` VALUES (14, 'Tell', 2);
INSERT INTO `UserNodes` VALUES (18, 'Test', 2);
INSERT INTO `UserNodes` VALUES (12, 'TimedEvents', 2);
INSERT INTO `UserNodes` VALUES (31, 'Options', 2);
INSERT INTO `UserNodes` VALUES (32, 'Vote', 2);

--
-- Constraints for dumped tables
--

--
-- Constraints for table `GroupMembers`
--
ALTER TABLE `GroupMembers`
  ADD CONSTRAINT `GroupMembers_ibfk_1` FOREIGN KEY (`GroupID`) REFERENCES `UserNodes` (`NodeID`),
  ADD CONSTRAINT `GroupMembers_ibfk_2` FOREIGN KEY (`MemberID`) REFERENCES `UserNodes` (`NodeID`);

--
-- Constraints for table `ObjectStoreData`
--
ALTER TABLE `ObjectStoreData`
  ADD CONSTRAINT `ObjectStoreData_ibfk_1` FOREIGN KEY (`ObjectID`) REFERENCES `ObjectStore` (`ObjectID`);

--
-- Constraints for table `UserNodePermissions`
--
ALTER TABLE `UserNodePermissions`
  ADD CONSTRAINT `UserNodePermissions_ibfk_1` FOREIGN KEY (`NodeID`) REFERENCES `UserNodes` (`NodeID`);
